<!DOCTYPE html>
<html>
<head>
<title>zettel</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
window.onload = function()
{
  var container = document.getElementById("content");
  var lastUpdate = Math.floor(Date.now() / 1000);

  setInterval(function() {
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "[[[ADDRESS]]][[[PATH]]]/check", true);
    xhttp.setRequestHeader("Last-update", lastUpdate.toString());
    xhttp.timeout = 250;
    xhttp.onreadystatechange = function() {
      if (xhttp.readyState == 4 && xhttp.status == 200)
      {
        if (xhttp.responseText != "")
        {
          lastUpdate = Math.floor(Date.now() / 1000);
          container.innerHTML = xhttp.responseText;
        }
      }
    };
    xhttp.send(null);
  }, 300);

  document.getElementById("edit-button").onclick = function()
  {
    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", "[[[ADDRESS]]][[[PATH]]]/edit", true);
    xhttp.send(null);
  };
};
</script>
</head>
<body>
<div>
  <button id="edit-button">Edit</button>
</div>
<hr>
<article id="content">
[[[CONTENT]]]
</article>
</body>
</html>
